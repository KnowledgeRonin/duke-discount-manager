"use client";

import { useState } from "react";
import { DndContext, DragEndEvent, DragOverlay, useSensor, useSensors, PointerSensor } from '@dnd-kit/core';
import { Sidebar } from "@/components/sidebar/sidebar";
import { Block } from "@/app/types";
import { Canvas } from "@/components/canvas/canvas";
import { Card } from "@/components/ui/card";

export const VOUCHER_SVG = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 197.36 100.25"><defs><style>.cls-1,.cls-9{fill:#fff;}.cls-2{fill:#f60;}.cls-3,.cls-4{fill:none;stroke:#752f00;stroke-linecap:round;stroke-linejoin:round;stroke-width:0.5px;}.cls-4{stroke-dasharray:1.96 1.96;}.cls-10,.cls-11,.cls-5,.cls-7,.cls-8{fill:#752f00;}.cls-6{fill:#e0eafc;}.cls-7{font-size:3.55px;letter-spacing:0.1em;}.cls-10,.cls-7{font-family:Poppins-Regular, Poppins;}.cls-8{font-size:5.75px;font-family:Poppins-SemiBold, Poppins;font-weight:600;}.cls-9{font-size:26.05px;font-family:BigShouldersDisplay-Black, Big Shoulders Display;}.cls-11,.cls-9{font-weight:800;}.cls-10{font-size:4.49px;letter-spacing:0.7em;}.cls-11{font-size:15.54px;font-family:Poppins-Black, Poppins;}</style></defs><title>Asset 61</title><g id="Layer_2" data-name="Layer 2"><g id="OBJECT"><path class="cls-1" d="M197.36,6V0h-46a7,7,0,0,1-7,7,7,7,0,0,1-7-7H0V6A2.2,2.2,0,0,1,.36,6a3.66,3.66,0,0,1,0,7.32c-.12,0-.24,0-.36,0v6.48c.12,0,.24,0,.36,0A3.66,3.66,0,0,1,.36,27L0,27v6.47l.36,0a3.66,3.66,0,1,1,0,7.32c-.12,0-.24,0-.36,0v6.48a2.2,2.2,0,0,1,.36,0,3.66,3.66,0,1,1,0,7.32,2.2,2.2,0,0,1-.36,0v6.48c.12,0,.24,0,.36,0a3.66,3.66,0,0,1,0,7.32l-.36,0v6.47c.12,0,.24,0,.36,0a3.66,3.66,0,0,1,0,7.32c-.12,0-.24,0-.36,0v6.48a2.2,2.2,0,0,1,.36,0,3.66,3.66,0,0,1,0,7.32,2.2,2.2,0,0,1-.36,0v4.63H137.37c0-.09,0-.17,0-.25a7,7,0,0,1,14,0c0,.08,0,.16,0,.25h46V95.66a3.66,3.66,0,0,1,0-7.32v-6.4a3.66,3.66,0,0,1,0-7.32V68.21a3.66,3.66,0,0,1,0-7.32v-6.4a3.66,3.66,0,0,1,0-7.32v-6.4a3.66,3.66,0,0,1,0-7.32V27a3.66,3.66,0,0,1,0-7.32v-6.4a3.66,3.66,0,0,1,0-7.32Z"/><rect class="cls-2" x="16.95" y="50" width="61.45" height="40.01" rx="8.4"/><line class="cls-3" x1="144.36" y1="11" x2="144.36" y2="12"/><line class="cls-4" x1="144.36" y1="13.96" x2="144.36" y2="87.31"/><line class="cls-3" x1="144.36" y1="88.29" x2="144.36" y2="89.29"/><rect class="cls-5" x="157.37" y="39.57" width="16.99" height="0.49"/><rect class="cls-5" x="157.37" y="38.6" width="16.99" height="0.49"/><rect class="cls-5" x="157.37" y="36.97" width="16.99" height="0.82"/><rect class="cls-5" x="157.37" y="34.66" width="16.99" height="1.49"/><rect class="cls-5" x="157.37" y="17.54" width="16.99" height="0.82"/><rect class="cls-5" x="157.37" y="19.17" width="16.99" height="0.82"/><polygon class="cls-5" points="157.37 26.51 174.36 26.51 174.36 23.25 174.36 22.43 157.37 22.43 157.37 23.25 157.37 26.51"/><rect class="cls-5" x="157.37" y="20.8" width="16.99" height="0.82"/><rect class="cls-5" x="157.37" y="27.32" width="16.99" height="0.49"/><rect class="cls-5" x="157.37" y="28.3" width="16.99" height="0.49"/><rect class="cls-5" x="157.37" y="29.28" width="16.99" height="0.49"/><rect class="cls-5" x="157.37" y="12.65" width="16.99" height="2.45"/><rect class="cls-5" x="157.37" y="30.58" width="16.99" height="0.82"/><rect class="cls-5" x="157.37" y="32.21" width="16.99" height="1.49"/><rect class="cls-5" x="157.37" y="86.94" width="16.99" height="0.82"/><rect class="cls-5" x="157.37" y="77.98" width="16.99" height="0.82"/><rect class="cls-5" x="157.37" y="76.35" width="16.99" height="0.82"/><rect class="cls-5" x="157.37" y="74.71" width="16.99" height="0.82"/><rect class="cls-5" x="157.37" y="68.52" width="16.99" height="0.49"/><rect class="cls-5" x="157.37" y="67.54" width="16.99" height="0.49"/><rect class="cls-5" x="157.37" y="66.56" width="16.99" height="0.49"/><polygon class="cls-5" points="157.37 73.9 174.36 73.9 174.36 73.08 174.36 69.82 157.37 69.82 157.37 73.08 157.37 73.9"/><rect class="cls-5" x="157.37" y="81.24" width="16.99" height="2.45"/><rect class="cls-5" x="157.37" y="84.64" width="16.99" height="1.49"/><rect class="cls-5" x="157.37" y="64.93" width="16.99" height="0.82"/><rect class="cls-5" x="157.37" y="62.62" width="16.99" height="1.49"/><polygon class="cls-5" points="157.37 47.56 157.37 47.95 174.36 47.95 174.36 47.56 174.36 47.13 174.36 46.75 157.37 46.75 157.37 47.13 157.37 47.56"/><polygon class="cls-5" points="157.37 49.2 157.37 49.58 174.36 49.58 174.36 49.2 174.36 48.76 174.36 48.38 157.37 48.38 157.37 48.76 157.37 49.2"/><polygon class="cls-5" points="157.37 56.75 157.37 57.24 157.37 57.73 157.37 58.16 174.36 58.16 174.36 57.73 174.36 57.24 174.36 56.75 174.36 56.67 174.36 56.27 157.37 56.27 157.37 56.67 157.37 56.75"/><polygon class="cls-5" points="157.37 50.83 157.37 51.21 157.37 53.27 157.37 54.47 157.37 55.29 157.37 55.72 157.37 55.78 174.36 55.78 174.36 55.72 174.36 55.29 174.36 54.47 174.36 53.27 174.36 51.21 174.36 50.83 174.36 50.4 174.36 50.01 157.37 50.01 157.37 50.4 157.37 50.83"/><polygon class="cls-5" points="157.37 41.04 157.37 41.86 157.37 43.06 157.37 45.12 157.37 45.5 157.37 45.93 157.37 46.32 174.36 46.32 174.36 45.93 174.36 45.5 174.36 45.12 174.36 43.06 174.36 41.86 174.36 41.04 174.36 40.61 174.36 40.55 157.37 40.55 157.37 40.61 157.37 41.04"/><polygon class="cls-5" points="157.37 59.36 157.37 59.79 174.36 59.79 174.36 59.36 174.36 58.98 174.36 58.55 157.37 58.55 157.37 58.98 157.37 59.36"/><rect class="cls-5" x="157.37" y="60.18" width="16.99" height="1.49"/><path class="cls-6" d="M120.81,37.68c0,.06-.09.14-.14.13s-.1-.08-.18-.17a.79.79,0,0,1,.23-.08S120.82,37.66,120.81,37.68Z"/><path class="cls-6" d="M109.11,27.76a.93.93,0,0,1,1-.83.89.89,0,0,1,.84,1,.92.92,0,0,1-1,.87A.94.94,0,0,1,109.11,27.76Z"/><path class="cls-6" d="M108.06,32.79a.77.77,0,1,1,.86-.71A.78.78,0,0,1,108.06,32.79Z"/><path class="cls-6" d="M106.3,35.66a.54.54,0,0,1,.51.59.56.56,0,0,1-.59.51.58.58,0,0,1-.52-.59A.56.56,0,0,1,106.3,35.66Z"/><path class="cls-6" d="M104.82,25.93a1,1,0,1,1,2.06.17,1,1,0,0,1-1.11.93A1,1,0,0,1,104.82,25.93Z"/><path class="cls-6" d="M104.38,40.7c-.14,0-.32-.15-.27-.29s.14-.19.28-.35c.11.17.22.26.24.37A.24.24,0,0,1,104.38,40.7Z"/><path class="cls-6" d="M110.8,38.12a.39.39,0,0,1-.39.33.36.36,0,0,1-.32-.38.36.36,0,0,1,.38-.33A.37.37,0,0,1,110.8,38.12Z"/><path class="cls-6" d="M115.14,25.47a.91.91,0,1,1,1.82.16.9.9,0,0,1-1,.82A.91.91,0,0,1,115.14,25.47Z"/><path class="cls-6" d="M119.48,27.41a.75.75,0,0,1,.79-.73.77.77,0,0,1,.72.8.75.75,0,0,1-.77.7A.73.73,0,0,1,119.48,27.41Z"/><path class="cls-6" d="M116.85,35.84a.34.34,0,0,1-.39.3.36.36,0,0,1-.31-.39.38.38,0,0,1,.4-.31A.35.35,0,0,1,116.85,35.84Z"/><path class="cls-6" d="M114.62,40.1c-.06,0-.1-.08-.19-.15.1-.05.17-.12.22-.1s.08.1.1.16S114.65,40.11,114.62,40.1Z"/><path class="cls-6" d="M113.44,29.68a.8.8,0,0,1,.81-.73.79.79,0,0,1,.73.81.77.77,0,1,1-1.54-.08Z"/><path class="cls-6" d="M108.74,42.26c-.09.07-.15.15-.2.14s-.1-.09-.12-.15.08-.1.12-.1S108.65,42.21,108.74,42.26Z"/><path class="cls-6" d="M103.88,31.07a.89.89,0,0,1-.81-.95.89.89,0,1,1,1.78.17A.88.88,0,0,1,103.88,31.07Z"/><path class="cls-6" d="M96,36a.63.63,0,0,1,.61.67.66.66,0,0,1-.67.62.68.68,0,0,1-.62-.68A.67.67,0,0,1,96,36Z"/><path class="cls-6" d="M97.05,32.42a.87.87,0,0,1,.92-.79.84.84,0,0,1,.76.93.82.82,0,0,1-.88.76A.85.85,0,0,1,97.05,32.42Z"/><path class="cls-6" d="M94.48,40.87a.36.36,0,0,1-.38.32.36.36,0,0,1-.33-.38.39.39,0,0,1,.39-.33A.37.37,0,0,1,94.48,40.87Z"/><path class="cls-6" d="M92.78,30.54a.94.94,0,0,1,1-.89,1,1,0,0,1,.89,1,.94.94,0,0,1-1.88-.11Z"/><path class="cls-6" d="M92.38,45s-.07.11-.11.11a.48.48,0,0,1-.18-.08L92,45c.07,0,.14-.08.2-.06S92.35,45,92.38,45Z"/><path class="cls-6" d="M94.52,26.32a1.08,1.08,0,0,1,1.17-1,1.09,1.09,0,0,1,1,1.16,1.11,1.11,0,0,1-1.16,1A1.09,1.09,0,0,1,94.52,26.32Z"/><path class="cls-6" d="M101.36,34.29a.72.72,0,1,1,.67.79A.72.72,0,0,1,101.36,34.29Z"/><path class="cls-6" d="M102.46,44.74s-.1-.07-.1-.11a.8.8,0,0,1,.12-.21c.07.1.15.16.14.2S102.53,44.72,102.46,44.74Z"/><path class="cls-6" d="M100.67,38.58a.48.48,0,0,1-.54.44.48.48,0,1,1,.54-.44Z"/><path class="cls-6" d="M98.51,42.76c0,.08-.12.14-.24.27-.08-.15-.17-.25-.17-.34a.33.33,0,0,1,.22-.17A.18.18,0,0,1,98.51,42.76Z"/><path class="cls-6" d="M98.77,28.24a1,1,0,0,1,1.1-.94,1,1,0,0,1,.91,1.08,1,1,0,0,1-1.06.93A1,1,0,0,1,98.77,28.24Z"/><path class="cls-6" d="M132.77,8.49a1,1,0,0,1,.53-1,1,1,0,0,1,1.24.12c0,.51-.08,1-.11,1.49a.36.36,0,0,1-.28.36A1.07,1.07,0,0,1,132.77,8.49Z"/><path class="cls-6" d="M67.61.51a1.67,1.67,0,0,1-1-.51H69A1.67,1.67,0,0,1,67.61.51Z"/><path class="cls-6" d="M102.56,1.2A1.76,1.76,0,0,1,101,0h3.31A1.79,1.79,0,0,1,102.56,1.2Z"/><path class="cls-6" d="M67.46,3.13a1.55,1.55,0,0,1-1.7,1.45,1.58,1.58,0,0,1-1.45-1.71A1.6,1.6,0,0,1,66,1.43,1.58,1.58,0,0,1,67.46,3.13Z"/><path class="cls-6" d="M126.62,10.69a1.16,1.16,0,0,1,1.18-1.12,1.14,1.14,0,0,1,1.12,1.17,1.16,1.16,0,0,1-1.17,1.13A1.18,1.18,0,0,1,126.62,10.69Z"/><path class="cls-6" d="M132.41,22.2a.66.66,0,0,1,.59.71.64.64,0,0,1-.66.57.63.63,0,0,1-.61-.67A.65.65,0,0,1,132.41,22.2Z"/><path class="cls-6" d="M128.46,6.43a1.18,1.18,0,0,1,1.31-1.09,1.21,1.21,0,0,1,1.1,1.31,1.22,1.22,0,0,1-1.32,1.09A1.21,1.21,0,0,1,128.46,6.43Z"/><path class="cls-6" d="M121.23,23.18a.91.91,0,0,1,1-.81.88.88,0,0,1,.8.95.86.86,0,0,1-.94.81A.89.89,0,0,1,121.23,23.18Z"/><path class="cls-6" d="M131.44,3.61a1.28,1.28,0,0,1-1.15-1.33,1.25,1.25,0,0,1,1.36-1.16,1.23,1.23,0,0,1,1.14,1.32A1.26,1.26,0,0,1,131.44,3.61Z"/><path class="cls-6" d="M102.48,3.75A1.67,1.67,0,1,1,100.93,2,1.7,1.7,0,0,1,102.48,3.75Z"/><path class="cls-6" d="M77.89.22A1.78,1.78,0,0,1,77.17,0h1.69A1.78,1.78,0,0,1,77.89.22Z"/><path class="cls-6" d="M92.26,4.16a1.68,1.68,0,0,1-1.82,1.57,1.72,1.72,0,0,1-1.59-1.82,1.74,1.74,0,0,1,1.83-1.58A1.7,1.7,0,0,1,92.26,4.16Z"/><path class="cls-6" d="M77.82,2.73A1.69,1.69,0,1,1,76.24.92,1.69,1.69,0,0,1,77.82,2.73Z"/><path class="cls-6" d="M92.31,1.65A1.83,1.83,0,0,1,90.66,0h3.57A1.8,1.8,0,0,1,92.31,1.65Z"/><path class="cls-6" d="M125.6,25.08a.7.7,0,0,1,.75-.64.72.72,0,0,1,.65.76.7.7,0,0,1-.76.63A.68.68,0,0,1,125.6,25.08Z"/><path class="cls-6" d="M124.43,28.76a.56.56,0,0,1,.53.58.55.55,0,0,1-.58.53.56.56,0,0,1-.53-.58A.58.58,0,0,1,124.43,28.76Z"/><path class="cls-6" d="M126.89,35.4s-.07.11-.11.11a.48.48,0,0,1-.18-.08l0-.11c.07,0,.14-.08.2-.06S126.86,35.34,126.89,35.4Z"/><path class="cls-6" d="M122.91,33.55a.34.34,0,1,1-.3-.39A.34.34,0,0,1,122.91,33.55Z"/><path class="cls-6" d="M123,19a1,1,0,0,1,1.06-.93,1,1,0,0,1,.92,1,1,1,0,1,1-2-.09Z"/><path class="cls-6" d="M127.35,20.92a.87.87,0,0,1,.88-.79A.84.84,0,0,1,129,21a.82.82,0,0,1-.86.78A.83.83,0,0,1,127.35,20.92Z"/><path class="cls-6" d="M91.07,34.71a.78.78,0,0,1,.83-.7.76.76,0,0,1,.69.83.75.75,0,0,1-.82.69A.76.76,0,0,1,91.07,34.71Z"/><path class="cls-6" d="M130.93,27a.47.47,0,0,1-.49.44A.46.46,0,0,1,130,27a.44.44,0,0,1,.44-.44A.45.45,0,0,1,130.93,27Z"/><path class="cls-6" d="M129.14,16.72a.93.93,0,0,1,1-.86.91.91,0,0,1,.87,1,.92.92,0,0,1-1,.86A1,1,0,0,1,129.14,16.72Z"/><path class="cls-6" d="M128.7,30.94a.25.25,0,0,1,.19.32c0,.1-.16.17-.31.32a2,2,0,0,1-.21-.4A.27.27,0,0,1,128.7,30.94Z"/><path class="cls-6" d="M133.73,18.13c0,.35,0,.64-.07,1C133.4,18.67,133.41,18.56,133.73,18.13Z"/><path class="cls-6" d="M63.28,1.25A1.57,1.57,0,0,1,61.6,2.68,1.55,1.55,0,0,1,60.15,1a1.58,1.58,0,0,1,.48-1h2.15A1.61,1.61,0,0,1,63.28,1.25Z"/><path class="cls-6" d="M55.62,23.83a.91.91,0,0,1,1-.8.88.88,0,0,1,.79,1,.86.86,0,0,1-1,.8A.89.89,0,0,1,55.62,23.83Z"/><path class="cls-6" d="M58.13,29.94a.67.67,0,1,1,1.34.08.68.68,0,0,1-.71.63A.67.67,0,0,1,58.13,29.94Z"/><path class="cls-6" d="M57.26,34.19a.35.35,0,0,1-.37.32.36.36,0,0,1-.33-.38.35.35,0,0,1,.38-.32A.34.34,0,0,1,57.26,34.19Z"/><path class="cls-6" d="M55.16,38.34s-.09.13-.14.13-.09-.08-.18-.17a1,1,0,0,1,.22-.08S55.17,38.32,55.16,38.34Z"/><path class="cls-6" d="M52.74,31.92a.36.36,0,0,1,.35.36.38.38,0,0,1-.36.35.36.36,0,0,1,0-.71Z"/><path class="cls-6" d="M64,27.6a.91.91,0,0,1,1-.8.89.89,0,0,1,.79,1,.87.87,0,0,1-1,.79A.88.88,0,0,1,64,27.6Z"/><path class="cls-6" d="M63,31.2a.66.66,0,0,1,.63.71.66.66,0,0,1-1.32-.05A.66.66,0,0,1,63,31.2Z"/><path class="cls-6" d="M61.51,21.55a1,1,0,0,1,1.11-1,1.05,1.05,0,0,1,1,1.13,1.09,1.09,0,0,1-1.16,1A1.07,1.07,0,0,1,61.51,21.55Z"/><path class="cls-6" d="M51.47,21.94a.87.87,0,0,1,.92-.78.88.88,0,0,1,.8.95.86.86,0,0,1-1,.77A.85.85,0,0,1,51.47,21.94Z"/><path class="cls-6" d="M59.8,25.76a.89.89,0,0,1,1-.86.9.9,0,0,1-.12,1.79A.88.88,0,0,1,59.8,25.76Z"/><path class="cls-6" d="M59.33,40.23c0,.06-.07.1-.15.19,0-.1-.11-.17-.1-.22s.1-.09.17-.09S59.34,40.2,59.33,40.23Z"/><path class="cls-6" d="M61.45,36.09a.39.39,0,0,1-.4.31.35.35,0,0,1-.3-.4.34.34,0,0,1,.39-.3A.36.36,0,0,1,61.45,36.09Z"/><path class="cls-6" d="M54,28.05a.65.65,0,0,1,.72-.62.67.67,0,0,1,.59.71.66.66,0,0,1-.72.61A.64.64,0,0,1,54,28.05Z"/><path class="cls-6" d="M40.32,26.63a.24.24,0,0,1-.11.16s-.11-.06-.21-.11c.1-.07.14-.13.2-.14S40.33,26.61,40.32,26.63Z"/><path class="cls-6" d="M51,36.46a.2.2,0,0,1-.15.12.5.5,0,0,1-.2-.09l.08-.11a.43.43,0,0,1,.19,0S51,36.44,51,36.46Z"/><path class="cls-6" d="M39.08,16.38a.7.7,0,0,1,.74-.66.68.68,0,0,1,.66.73.7.7,0,0,1-.73.67A.72.72,0,0,1,39.08,16.38Z"/><path class="cls-6" d="M44.36,28.81c-.17,0-.28-.11-.24-.27s.13-.2.25-.37a2,2,0,0,1,.27.36C44.68,28.67,44.52,28.82,44.36,28.81Z"/><path class="cls-6" d="M38.31,20.61a.4.4,0,0,1-.41.4.43.43,0,0,1-.43-.43.45.45,0,0,1,.47-.41A.42.42,0,0,1,38.31,20.61Z"/><path class="cls-6" d="M90,38.44a.5.5,0,0,1,.46.57.52.52,0,0,1-.57.47.54.54,0,0,1-.47-.58A.51.51,0,0,1,90,38.44Z"/><path class="cls-6" d="M43.2,18.26a.76.76,0,0,1,.8-.73.78.78,0,0,1,.74.84.8.8,0,0,1-.83.71A.77.77,0,0,1,43.2,18.26Z"/><path class="cls-6" d="M48.87,30.46a.34.34,0,0,1-.35.29.32.32,0,0,1-.27-.36.29.29,0,0,1,.32-.27A.33.33,0,0,1,48.87,30.46Z"/><path class="cls-6" d="M45.68,24.32a.58.58,0,1,1,.54.62A.59.59,0,0,1,45.68,24.32Z"/><path class="cls-6" d="M49.8,26.17a.64.64,0,0,1,1.28,0,.63.63,0,0,1-.66.63A.65.65,0,0,1,49.8,26.17Z"/><path class="cls-6" d="M46.79,34.6s-.06.11-.12.2c-.06-.09-.12-.14-.13-.2a.2.2,0,0,1,.1-.12C46.7,34.5,46.78,34.55,46.79,34.6Z"/><path class="cls-6" d="M47.33,20.11a.83.83,0,0,1,.89-.75.87.87,0,0,1,.75.91.83.83,0,0,1-.9.73A.81.81,0,0,1,47.33,20.11Z"/><path class="cls-6" d="M36.67,10.29a.82.82,0,0,1,1.64.12.83.83,0,0,1-.88.77A.85.85,0,0,1,36.67,10.29Z"/><path class="cls-6" d="M82.31,35.23a.73.73,0,0,1-.75.67.72.72,0,0,1-.69-.77.72.72,0,0,1,1.44.1Z"/><path class="cls-6" d="M84.23,41.29a.36.36,0,0,1-.39.31.37.37,0,0,1-.31-.39.36.36,0,0,1,.39-.31A.35.35,0,0,1,84.23,41.29Z"/><path class="cls-6" d="M82.56,30.92a.9.9,0,0,1,1-.83.92.92,0,0,1,.86,1,1,1,0,0,1-1,.84A.92.92,0,0,1,82.56,30.92Z"/><path class="cls-6" d="M80,24.87a1.14,1.14,0,1,1,2.28.15A1.14,1.14,0,0,1,80,24.87Z"/><path class="cls-6" d="M80.16,39.39a.49.49,0,0,1-.47.43.45.45,0,0,1-.43-.49.44.44,0,0,1,.45-.42A.47.47,0,0,1,80.16,39.39Z"/><path class="cls-6" d="M65.59,38a.31.31,0,0,1-.31.28.3.3,0,0,1-.31-.32.32.32,0,0,1,.33-.31A.33.33,0,0,1,65.59,38Z"/><path class="cls-6" d="M78.33,29a1,1,0,0,1,1-.9,1,1,0,0,1,.9,1.09,1,1,0,0,1-1.07.86A1,1,0,0,1,78.33,29Z"/><path class="cls-6" d="M88.34,43.13c-.11.09-.17.19-.25.21a.19.19,0,0,1-.24-.2.35.35,0,0,1,.23-.21S88.23,43,88.34,43.13Z"/><path class="cls-6" d="M88.52,28.62a1,1,0,0,1,1.07-.94,1,1,0,0,1,1,1.09,1,1,0,0,1-1.09.95A1,1,0,0,1,88.52,28.62Z"/><path class="cls-6" d="M84.28,26.75a1.08,1.08,0,0,1,2.16.14,1.08,1.08,0,0,1-1.15,1A1.07,1.07,0,0,1,84.28,26.75Z"/><path class="cls-6" d="M85.8,36.42a.65.65,0,0,1,.6.68.61.61,0,0,1-.67.6.65.65,0,0,1-.61-.67A.67.67,0,0,1,85.8,36.42Z"/><path class="cls-6" d="M86.8,32.83a.85.85,0,0,1,.91-.79.84.84,0,0,1,.79.91.85.85,0,0,1-1.7-.12Z"/><path class="cls-6" d="M77.94,43.55c0,.05-.1.12-.15.12s-.09-.09-.17-.18a1.64,1.64,0,0,1,.23-.07S78,43.53,77.94,43.55Z"/><path class="cls-6" d="M69.89,25.31a1,1,0,0,1,1.13-1,1,1,0,1,1-1.13,1Z"/><path class="cls-6" d="M76.63,33.27a.78.78,0,0,1,.84-.72.82.82,0,0,1,.73.86.79.79,0,0,1-.86.71A.76.76,0,0,1,76.63,33.27Z"/><path class="cls-6" d="M68.18,29.52a.88.88,0,0,1,.94-.82.9.9,0,0,1,.8.92.88.88,0,0,1-1,.81A.86.86,0,0,1,68.18,29.52Z"/><path class="cls-6" d="M67.79,33.81a.61.61,0,0,1-.69.57.65.65,0,0,1-.59-.69.69.69,0,0,1,.71-.59A.65.65,0,0,1,67.79,33.81Z"/><path class="cls-6" d="M65.68,23.43a1.07,1.07,0,0,1,1.17-1,1,1,0,0,1,1,1.13,1.07,1.07,0,0,1-1.11,1A1.09,1.09,0,0,1,65.68,23.43Z"/><path class="cls-6" d="M69.72,39.83c0,.14-.17.29-.31.26s-.26-.15-.21-.31.15-.18.29-.33A1.4,1.4,0,0,1,69.72,39.83Z"/><path class="cls-6" d="M74.1,27.21a1,1,0,0,1,1.09-1,1,1,0,0,1,.94,1.11,1,1,0,0,1-1.07.93A1,1,0,0,1,74.1,27.21Z"/><path class="cls-6" d="M75.55,37a.53.53,0,1,1-.56.49A.53.53,0,0,1,75.55,37Z"/><path class="cls-6" d="M71.39,35a.58.58,0,0,1,.54.62.59.59,0,0,1-.64.58.64.64,0,0,1-.56-.63A.61.61,0,0,1,71.39,35Z"/><path class="cls-6" d="M72.4,31.41a.8.8,0,0,1,.85-.78.84.84,0,0,1,.82.88.87.87,0,0,1-.92.79A.84.84,0,0,1,72.4,31.41Z"/><path class="cls-6" d="M73.84,41.72a.18.18,0,0,1-.24.18c-.08,0-.14-.12-.25-.22.12-.09.22-.2.27-.18A.32.32,0,0,1,73.84,41.72Z"/><path class="cls-6" d="M131,12.53a1,1,0,0,1,1.07-.94A1,1,0,0,1,133,12.7a1,1,0,0,1-1.08.9A1,1,0,0,1,131,12.53Z"/><path class="cls-6" d="M90.27,24.47a1.17,1.17,0,0,1,1.24-1.11,1.2,1.2,0,0,1,1.08,1.27,1.17,1.17,0,0,1-1.24,1.05A1.14,1.14,0,0,1,90.27,24.47Z"/><path class="cls-6" d="M87.75,18.36a1.32,1.32,0,0,1,1.43-1.24,1.36,1.36,0,0,1,1.26,1.44A1.38,1.38,0,0,1,89,19.81,1.33,1.33,0,0,1,87.75,18.36Z"/><path class="cls-6" d="M86,22.57a1.23,1.23,0,1,1,1.12,1.3A1.23,1.23,0,0,1,86,22.57Z"/><path class="cls-6" d="M92,20.24a1.3,1.3,0,0,1,1.39-1.19,1.33,1.33,0,0,1,1.19,1.4,1.3,1.3,0,0,1-1.4,1.18A1.28,1.28,0,0,1,92,20.24Z"/><path class="cls-6" d="M98,18a1.33,1.33,0,0,1,1.41-1.23,1.35,1.35,0,0,1,1.24,1.41,1.33,1.33,0,0,1-1.44,1.24A1.31,1.31,0,0,1,98,18Z"/><path class="cls-6" d="M96.23,22.12A1.24,1.24,0,0,1,97.53,21a1.22,1.22,0,0,1,1.12,1.33,1.2,1.2,0,0,1-1.34,1.1A1.22,1.22,0,0,1,96.23,22.12Z"/><path class="cls-6" d="M77.53,18.81a1.31,1.31,0,0,1,2.61.16,1.29,1.29,0,0,1-1.38,1.25A1.31,1.31,0,0,1,77.53,18.81Z"/><path class="cls-6" d="M73.32,17A1.34,1.34,0,0,1,76,17.1,1.34,1.34,0,1,1,73.32,17Z"/><path class="cls-6" d="M71.61,21.13A1.2,1.2,0,0,1,72.9,20,1.17,1.17,0,0,1,74,21.3a1.21,1.21,0,0,1-1.28,1.12A1.23,1.23,0,0,1,71.61,21.13Z"/><path class="cls-6" d="M100.49,24a1.13,1.13,0,1,1,1.06,1.22A1.13,1.13,0,0,1,100.49,24Z"/><path class="cls-6" d="M75.82,23a1.18,1.18,0,0,1,1.27-1.07,1.16,1.16,0,0,1,1.07,1.26,1.15,1.15,0,0,1-1.26,1.07A1.17,1.17,0,0,1,75.82,23Z"/><path class="cls-6" d="M81.8,20.68A1.27,1.27,0,1,1,83,22,1.26,1.26,0,0,1,81.8,20.68Z"/><path class="cls-6" d="M122.32,8.73a1.28,1.28,0,0,1,2.55.2,1.28,1.28,0,0,1-2.55-.2Z"/><path class="cls-6" d="M118.7,17.1a1.14,1.14,0,0,1,1.18-1,1.12,1.12,0,0,1,1.06,1.21,1.1,1.1,0,0,1-1.18,1A1.12,1.12,0,0,1,118.7,17.1Z"/><path class="cls-6" d="M118.34,32.21a.59.59,0,0,1-.54-.64.6.6,0,1,1,.54.64Z"/><path class="cls-6" d="M116.9,21.32a1,1,0,0,1,1.09-1,1,1,0,0,1,1,1.07,1,1,0,0,1-1.08,1A1,1,0,0,1,116.9,21.32Z"/><path class="cls-6" d="M124.81,14.8a1.1,1.1,0,0,1,1.19-1A1.08,1.08,0,0,1,127,15a1.06,1.06,0,0,1-1.16,1A1.08,1.08,0,0,1,124.81,14.8Z"/><path class="cls-6" d="M67.43,19.25a1.18,1.18,0,0,1,1.26-1.13,1.22,1.22,0,0,1,1.17,1.29,1.23,1.23,0,0,1-1.32,1.13A1.2,1.2,0,0,1,67.43,19.25Z"/><path class="cls-6" d="M114.39,15.24a1.26,1.26,0,0,1,1.34-1.17,1.22,1.22,0,0,1,1.15,1.3,1.24,1.24,0,0,1-1.33,1.18A1.27,1.27,0,0,1,114.39,15.24Z"/><path class="cls-6" d="M120.5,12.91a1.2,1.2,0,0,1,1.31-1.09,1.17,1.17,0,0,1,1.09,1.29,1.2,1.2,0,0,1-1.3,1.11A1.23,1.23,0,0,1,120.5,12.91Z"/><path class="cls-6" d="M106.54,21.76A1.15,1.15,0,1,1,107.61,23,1.14,1.14,0,0,1,106.54,21.76Z"/><path class="cls-6" d="M108.32,17.56a1.24,1.24,0,0,1,1.34-1.17,1.27,1.27,0,0,1,1.18,1.34,1.29,1.29,0,0,1-1.35,1.18A1.27,1.27,0,0,1,108.32,17.56Z"/><path class="cls-6" d="M112.4,33.32a.58.58,0,0,1,.52.65.61.61,0,0,1-.63.55.64.64,0,0,1-.57-.66A.6.6,0,0,1,112.4,33.32Z"/><path class="cls-6" d="M112.6,19.42a1.18,1.18,0,0,1,1.25-1.09,1.15,1.15,0,1,1-1.25,1.09Z"/><path class="cls-6" d="M110.83,23.58a1.06,1.06,0,0,1,1.1-1,1,1,0,0,1-.12,2.09A1.05,1.05,0,0,1,110.83,23.58Z"/><path class="cls-6" d="M102.25,19.87a1.29,1.29,0,0,1,1.35-1.19,1.27,1.27,0,0,1,1.15,1.37,1.23,1.23,0,0,1-1.33,1.13A1.26,1.26,0,0,1,102.25,19.87Z"/><path class="cls-6" d="M47.17,1A1.31,1.31,0,0,1,46,0h2.58A1.37,1.37,0,0,1,47.17,1Z"/><path class="cls-6" d="M134.81,3.62c0,.39-.05.7-.07,1A.8.8,0,0,1,134.81,3.62Z"/><path class="cls-6" d="M38.34,6.08a1,1,0,1,1,.91,1.08A1,1,0,0,1,38.34,6.08Z"/><path class="cls-6" d="M127.23,1.84A1.36,1.36,0,0,1,126,.38,1.51,1.51,0,0,1,126,0h2.59a1.46,1.46,0,0,1,.08.56A1.38,1.38,0,0,1,127.23,1.84Z"/><path class="cls-6" d="M40.08,1.88a1.16,1.16,0,0,1,1.22-1,1.14,1.14,0,1,1-1.22,1Z"/><path class="cls-6" d="M42.59,22.52a.52.52,0,0,1-.54.46.48.48,0,0,1-.47-.51.51.51,0,0,1,.5-.5A.53.53,0,0,1,42.59,22.52Z"/><path class="cls-6" d="M34.74,5.11a.41.41,0,0,1-.27-.48c0-.12,0-.24,0-.36a3,3,0,0,0,0-.42.43.43,0,0,1,.37-.46.92.92,0,0,1,1,.4.92.92,0,0,1-1.19,1.32Z"/><path class="cls-6" d="M38.11.18a1.08,1.08,0,0,1-1.18,1A1,1,0,0,1,36,0V0H38.1A1.09,1.09,0,0,1,38.11.18Z"/><path class="cls-6" d="M63.24,17.39a1.22,1.22,0,1,1,1.14,1.27A1.23,1.23,0,0,1,63.24,17.39Z"/><path class="cls-6" d="M40.77,12.16a.92.92,0,0,1,1-.82.89.89,0,0,1,.79,1,.88.88,0,0,1-1,.81A.9.9,0,0,1,40.77,12.16Z"/><path class="cls-6" d="M36.14,24.79s-.09.12-.11.12-.14-.08-.15-.13.07-.1.14-.19A.79.79,0,0,1,36.14,24.79Z"/><path class="cls-6" d="M36.22,14.57a.62.62,0,0,1-.66.57.61.61,0,1,1,.66-.57Z"/><path class="cls-6" d="M33.73,18.4c.16,0,.32.17.31.33a.33.33,0,0,1-.34.29c-.19,0-.29-.15-.25-.44A.9.9,0,0,1,33.73,18.4Z"/><path class="cls-6" d="M53.17,17.76a1,1,0,1,1,1,1.13A1,1,0,0,1,53.17,17.76Z"/><path class="cls-6" d="M54.87,13.57a1.17,1.17,0,0,1,1.29-1.09,1.2,1.2,0,0,1,1.09,1.26A1.21,1.21,0,0,1,56,14.86,1.19,1.19,0,0,1,54.87,13.57Z"/><path class="cls-6" d="M57.33,19.67a1.07,1.07,0,0,1,1.12-1,1,1,0,0,1,1,1.12,1.06,1.06,0,0,1-1.11,1A1.09,1.09,0,0,1,57.33,19.67Z"/><path class="cls-6" d="M59.07,15.47a1.21,1.21,0,0,1,2.42.15,1.23,1.23,0,0,1-1.31,1.15A1.22,1.22,0,0,1,59.07,15.47Z"/><path class="cls-6" d="M50.72,11.75a1.13,1.13,0,0,1,1.21-1.08A1.16,1.16,0,0,1,53,11.91,1.17,1.17,0,0,1,51.77,13,1.16,1.16,0,0,1,50.72,11.75Z"/><path class="cls-6" d="M44.19,3.78a1.2,1.2,0,0,1,1.3-1.1A1.18,1.18,0,0,1,46.59,4,1.21,1.21,0,0,1,45.3,5.08,1.23,1.23,0,0,1,44.19,3.78Z"/><path class="cls-6" d="M49,16a1,1,0,0,1,1-.94,1,1,0,0,1,1,1.08A1,1,0,0,1,50,17,1,1,0,0,1,49,16Z"/><path class="cls-6" d="M44.89,14a1,1,0,0,1,1-.89,1,1,0,0,1,.89,1,1,1,0,0,1-1,.88A1,1,0,0,1,44.89,14Z"/><path class="cls-6" d="M112.64,3.32a1.59,1.59,0,1,1-3.17-.19,1.59,1.59,0,0,1,3.17.19Z"/><path class="cls-6" d="M46.58,9.84a1.12,1.12,0,0,1,1.21-1,1.14,1.14,0,0,1,1,1.22,1.12,1.12,0,0,1-2.23-.2Z"/><path class="cls-6" d="M48.32,5.65A1.27,1.27,0,0,1,49.68,4.5a1.25,1.25,0,0,1,1.14,1.37A1.23,1.23,0,0,1,49.47,7,1.25,1.25,0,0,1,48.32,5.65Z"/><path class="cls-6" d="M42.45,8a1.05,1.05,0,0,1,1.12-1,1.07,1.07,0,0,1,1,1.15A1.07,1.07,0,1,1,42.45,8Z"/><path class="cls-6" d="M113.24,10.66a1.43,1.43,0,0,1,.22-2.85,1.43,1.43,0,1,1-.22,2.85Z"/><path class="cls-6" d="M111.35,14.77a1.34,1.34,0,0,1-1.22-1.46,1.32,1.32,0,0,1,1.45-1.23,1.34,1.34,0,0,1,1.23,1.45A1.37,1.37,0,0,1,111.35,14.77Z"/><path class="cls-6" d="M121.21,4.2a1.45,1.45,0,0,1-1.36-1.52,1.47,1.47,0,0,1,1.57-1.36,1.44,1.44,0,0,1,1.31,1.55A1.41,1.41,0,0,1,121.21,4.2Z"/><path class="cls-6" d="M119.35,8.33A1.37,1.37,0,0,1,118,6.89a1.39,1.39,0,0,1,1.47-1.34A1.43,1.43,0,0,1,120.81,7,1.41,1.41,0,0,1,119.35,8.33Z"/><path class="cls-6" d="M117.42,12.44a1.32,1.32,0,1,1,1.42-1.21A1.32,1.32,0,0,1,117.42,12.44Z"/><path class="cls-6" d="M107.65,7.28a1.52,1.52,0,0,1,1.65-1.39,1.5,1.5,0,0,1,1.37,1.62,1.52,1.52,0,0,1-1.6,1.41A1.54,1.54,0,0,1,107.65,7.28Z"/><path class="cls-6" d="M113.74,5a1.51,1.51,0,0,1,1.61-1.39,1.48,1.48,0,0,1,1.37,1.57,1.46,1.46,0,0,1-1.58,1.4A1.49,1.49,0,0,1,113.74,5Z"/><path class="cls-6" d="M97.34,7.67a1.59,1.59,0,0,1,3.17.27,1.59,1.59,0,0,1-3.17-.27Z"/><path class="cls-6" d="M107.2,13a1.43,1.43,0,0,1-1.36-1.51,1.46,1.46,0,0,1,1.52-1.36,1.43,1.43,0,0,1,1.35,1.52A1.41,1.41,0,0,1,107.2,13Z"/><path class="cls-6" d="M101.09,15.3A1.43,1.43,0,1,1,102.65,14,1.46,1.46,0,0,1,101.09,15.3Z"/><path class="cls-6" d="M105.29,17.11A1.38,1.38,0,0,1,104,15.66a1.35,1.35,0,0,1,1.45-1.24,1.31,1.31,0,0,1,1.24,1.44A1.34,1.34,0,0,1,105.29,17.11Z"/><path class="cls-6" d="M101.59,9.59a1.52,1.52,0,0,1,1.63-1.42,1.57,1.57,0,0,1,1.41,1.61A1.52,1.52,0,0,1,103,11.2,1.49,1.49,0,0,1,101.59,9.59Z"/><path class="cls-6" d="M70,6.48a1.59,1.59,0,0,1,.24-3.17A1.59,1.59,0,1,1,70,6.48Z"/><path class="cls-6" d="M104.85,7.11a1.6,1.6,0,1,1,1.73-1.48A1.6,1.6,0,0,1,104.85,7.11Z"/><path class="cls-6" d="M86.26,3.9A1.77,1.77,0,0,1,84.64,2,1.74,1.74,0,1,1,86.26,3.9Z"/><path class="cls-6" d="M94.65,7.58a1.68,1.68,0,0,1-1.56-1.79,1.66,1.66,0,0,1,1.77-1.52,1.66,1.66,0,0,1-.21,3.31Z"/><path class="cls-6" d="M117,2.42A1.54,1.54,0,0,1,115.58.8a1.47,1.47,0,0,1,.27-.8h2.54a1.57,1.57,0,0,1,.28,1A1.55,1.55,0,0,1,117,2.42Z"/><path class="cls-6" d="M126.81,4.74A1.34,1.34,0,0,1,125.35,6a1.31,1.31,0,0,1-1.19-1.43,1.33,1.33,0,0,1,1.42-1.22A1.35,1.35,0,0,1,126.81,4.74Z"/><path class="cls-6" d="M112.8.68A1.62,1.62,0,0,1,111.61,0h2.65A1.62,1.62,0,0,1,112.8.68Z"/><path class="cls-6" d="M96.49,3.47a1.74,1.74,0,1,1,1.87-1.59A1.72,1.72,0,0,1,96.49,3.47Z"/><path class="cls-6" d="M84.37,8a1.65,1.65,0,0,1-1.52-1.76,1.67,1.67,0,0,1,1.77-1.53A1.65,1.65,0,1,1,84.37,8Z"/><path class="cls-6" d="M96.94,13.48a1.5,1.5,0,1,1,.2-3,1.5,1.5,0,1,1-.2,3Z"/><path class="cls-6" d="M71.83,2.41A1.7,1.7,0,0,1,70.26.62,1.62,1.62,0,0,1,70.42,0h3.06a1.61,1.61,0,0,1,.16.82A1.69,1.69,0,0,1,71.83,2.41Z"/><path class="cls-6" d="M80.21,6.17a1.67,1.67,0,0,1-1.56-1.78,1.67,1.67,0,0,1,3.34.2A1.7,1.7,0,0,1,80.21,6.17Z"/><path class="cls-6" d="M80.43.24a2,2,0,0,1,0-.24H84a1.76,1.76,0,0,1,0,.4,1.77,1.77,0,0,1-1.85,1.68A1.76,1.76,0,0,1,80.43.24Z"/><path class="cls-6" d="M106.72,3a1.69,1.69,0,0,1-1.52-1.78A1.67,1.67,0,0,1,105.88,0h2a1.66,1.66,0,0,1,.66,1.47A1.66,1.66,0,0,1,106.72,3Z"/><path class="cls-6" d="M62,12.72a1.35,1.35,0,0,1-1.23-1.46A1.33,1.33,0,0,1,62.23,10a1.35,1.35,0,0,1,1.24,1.45A1.37,1.37,0,0,1,62,12.72Z"/><path class="cls-6" d="M58.37,5.24a1.45,1.45,0,1,1,2.9.17,1.45,1.45,0,0,1-2.9-.17Z"/><path class="cls-6" d="M57.84,10.82A1.38,1.38,0,0,1,56.6,9.39,1.34,1.34,0,0,1,58,8.16a1.33,1.33,0,0,1-.18,2.66Z"/><path class="cls-6" d="M62.53,7.06a1.48,1.48,0,0,1,1.6-1.33,1.44,1.44,0,0,1,1.33,1.59,1.46,1.46,0,0,1-1.59,1.34A1.5,1.5,0,0,1,62.53,7.06Z"/><path class="cls-6" d="M68.05,10.55a1.48,1.48,0,1,1,1.61-1.37A1.5,1.5,0,0,1,68.05,10.55Z"/><path class="cls-6" d="M66.19,14.61a1.38,1.38,0,0,1-1.25-1.46,1.36,1.36,0,0,1,1.46-1.24,1.33,1.33,0,0,1,1.24,1.45A1.35,1.35,0,0,1,66.19,14.61Z"/><path class="cls-6" d="M51.38,3A1.35,1.35,0,0,1,50.09,1.5,1.38,1.38,0,0,1,51.54.2a1.41,1.41,0,0,1,1.31,1.46A1.39,1.39,0,0,1,51.38,3Z"/><path class="cls-6" d="M57.41.77A1.51,1.51,0,0,1,56.2,0h2.66A1.56,1.56,0,0,1,57.41.77Z"/><path class="cls-6" d="M122.72,0h.85a1.57,1.57,0,0,1-.53.06A1.65,1.65,0,0,1,122.72,0Z"/><path class="cls-6" d="M55.52,4.83a1.4,1.4,0,0,1-1.29-1.52A1.42,1.42,0,0,1,55.74,2a1.44,1.44,0,0,1,1.33,1.51A1.43,1.43,0,0,1,55.52,4.83Z"/><path class="cls-6" d="M53.68,9a1.33,1.33,0,0,1-1.23-1.37,1.3,1.3,0,0,1,1.36-1.23,1.28,1.28,0,0,1,1.24,1.34A1.3,1.3,0,0,1,53.68,9Z"/><path class="cls-6" d="M70.37,16.49A1.34,1.34,0,0,1,69.14,15a1.33,1.33,0,0,1,1.45-1.23,1.35,1.35,0,1,1-.22,2.69Z"/><path class="cls-6" d="M86.7,13.9a1.51,1.51,0,1,1,1.59-1.4A1.5,1.5,0,0,1,86.7,13.9Z"/><path class="cls-6" d="M87.06,8.1A1.63,1.63,0,0,1,88.8,6.61a1.6,1.6,0,0,1,1.48,1.74,1.61,1.61,0,0,1-3.22-.25Z"/><path class="cls-6" d="M72.24,12.44a1.51,1.51,0,0,1-1.35-1.6A1.48,1.48,0,0,1,72.48,9.5a1.45,1.45,0,0,1,1.34,1.58A1.48,1.48,0,0,1,72.24,12.44Z"/><path class="cls-6" d="M90.86,15.74a1.46,1.46,0,1,1,1.57-1.36A1.47,1.47,0,0,1,90.86,15.74Z"/><path class="cls-6" d="M91.29,10a1.6,1.6,0,0,1,1.65-1.47,1.57,1.57,0,0,1,1.47,1.69,1.54,1.54,0,0,1-1.67,1.43A1.57,1.57,0,0,1,91.29,10Z"/><path class="cls-6" d="M84.84,18a1.36,1.36,0,0,1-1.32-1.47A1.38,1.38,0,0,1,85,15.18a1.41,1.41,0,0,1,1.28,1.48A1.38,1.38,0,0,1,84.84,18Z"/><path class="cls-6" d="M95,17.56a1.4,1.4,0,1,1,1.52-1.3A1.41,1.41,0,0,1,95,17.56Z"/><path class="cls-6" d="M72.66,6.68A1.6,1.6,0,0,1,74.35,5.2a1.58,1.58,0,1,1-1.69,1.48Z"/><path class="cls-6" d="M81.07,10.45a1.54,1.54,0,0,1,3.08.22,1.54,1.54,0,0,1-3.08-.22Z"/><path class="cls-6" d="M76.44,14.3a1.45,1.45,0,0,1-1.35-1.54A1.45,1.45,0,1,1,78,13,1.45,1.45,0,0,1,76.44,14.3Z"/><path class="cls-6" d="M76.87,8.54a1.58,1.58,0,0,1,1.66-1.45A1.61,1.61,0,0,1,80,8.79a1.57,1.57,0,0,1-1.67,1.44A1.55,1.55,0,0,1,76.87,8.54Z"/><path class="cls-6" d="M80.64,16.16a1.41,1.41,0,0,1-1.34-1.52,1.44,1.44,0,0,1,1.53-1.34,1.47,1.47,0,0,1,1.33,1.56A1.44,1.44,0,0,1,80.64,16.16Z"/><polygon class="cls-2" points="114.95 13.35 116.64 19.31 122.5 21.3 117.36 24.74 117.28 30.94 112.41 27.11 106.5 28.95 108.64 23.13 105.06 18.08 111.25 18.31 114.95 13.35"/><polygon class="cls-2" points="128.94 23.57 130.37 27.15 134.13 28.01 131.16 30.47 131.51 34.31 128.25 32.25 124.7 33.77 125.66 30.03 123.12 27.13 126.97 26.88 128.94 23.57"/><polygon class="cls-2" points="121.21 33.92 122.32 36.73 125.27 37.4 122.94 39.33 123.22 42.33 120.67 40.72 117.89 41.91 118.64 38.98 116.65 36.71 119.66 36.52 121.21 33.92"/></g><g id="TEXT"><text class="cls-7" transform="matrix(1, 0, 0, 1, 84.48, 84.78)">WWW.LOREMIPSUM.COM</text><text class="cls-8" transform="translate(85.25 59.55)">THIS VOUCHER<tspan x="0" y="8.52">VALID UNTIL :</tspan><tspan x="0" y="17.04">12 DEC 2024</tspan></text><text class="cls-9" transform="translate(26.95 79.79)">75%</text><text class="cls-10" transform="translate(181.65 89.57) rotate(-90)">12313423 54556</text><text class="cls-11" transform="translate(17.8 26.31)">VOUCHER<tspan x="0" y="15.95">SHOPPING</tspan></text></g></g></svg>`;


export const SVG_LIBRARY = [
  {
    id: 'star_shape',
    type: 'SVG',
    label: 'Star',
    content: '<svg viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" fill="#3B82F6"/></svg>',
    viewBox: { w: 24, h: 24 }
  },
  {
    id: 'heart_shape',
    type: 'SVG',
    label: 'Heart',
    content: '<svg viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" fill="#3B82F6"/></svg>',
    viewBox: { w: 24, h: 24 }
  },
  {
    id: 'voucher_template',
    type: 'SVG',
    label: 'Voucher',
    content: VOUCHER_SVG, 
    viewBox: { w: 197, h: 100 }
  }
];

export default function Home() {
  const [blocks, setBlocks] = useState<Block[]>([]);
  const [activeId, setActiveId] = useState<string | null>(null); // ID of the dragged element in the Sidebar
  const [selectedId, setSelectedId] = useState<string | null>(null);
  const [canvasDims, setCanvasDims] = useState({ width: 0, height: 0 }); // State to determine the size of the canvas

  // Configuring sensors for improved drag-and-drop UX
  const sensors = useSensors(
    useSensor(PointerSensor, {
      activationConstraint: { distance: 8 }, // Avoid accidental dragging with a simple click.
    })
  );

  const activeSidebarItem = activeId 
    ? SVG_LIBRARY.find(item => item.id === activeId) 
    : null;

  const activeBlock = blocks.find(b => b.id === selectedId) || null;

  const handleUpdateBlock = (id: string, newAttrs: Partial<Block>) => {
    setBlocks(prev => prev.map(b => b.id === id ? { ...b, ...newAttrs } : b));
  };

  const handleDragStart = (event: any) => {
    setActiveId(event.active.id);
  };

  const handleDragEnd = (event: DragEndEvent) => {
    const { active, over } = event;

    if (over && over.id === 'canvas-area') {
      const payload = active.data.current;

      if (payload) {

        // Calculate center position for new block
        const centerX = canvasDims.width > 0 ? canvasDims.width / 2 : 300;
        const centerY = canvasDims.height > 0 ? canvasDims.height / 2 : 300;
        
        const newBlock: Block = {
            id: `el-${Date.now()}`,
            type: payload.templateType,
            x: centerX, 
            y: centerY,
            rotation: 0,
            scaleX: 1.5, 
            scaleY: 1.5,
            fill: '#3B82F6',
            viewBox: payload.viewBox,
            svgContent: payload.content,
        };

        setBlocks([newBlock]);
        setSelectedId(newBlock.id);
      }
    }
    setActiveId(null);
  };

  return (
    <DndContext sensors={sensors} onDragStart={handleDragStart} onDragEnd={handleDragEnd}>
      <main className="flex h-screen w-screen overflow-hidden bg-background text-foreground">
        
        {/* Canvas Area (Drop Zone) */}
        <div className="flex-1 h-full relative">
            <Canvas 
                blocks={blocks}
                onSelect={setSelectedId}
                onUpdateBlock={handleUpdateBlock}
                onDimensionsChange={(dims) => setCanvasDims(dims)}
            />
        </div>

        {/* Sidebar (Drag Source) */}
        <Sidebar
            activeBlock={activeBlock}
            onUpdateBlock={handleUpdateBlock}
            onCloseEditor={() => setSelectedId(null)}
        />
      </main>

      {/* Overlay that follows the cursor */}
      <DragOverlay dropAnimation={null}>
        {activeSidebarItem ? (
           <Card className="w-24 h-24 flex items-center justify-center bg-blue-50 border-blue-500 opacity-90 cursor-grabbing shadow-2xl rotate-3 p-2 overflow-hidden">
              {/* Usamos dangerouslySetInnerHTML para renderizar cualquier SVG de la librer√≠a */}
              <div 
                className="w-full h-full flex items-center justify-center [&>svg]:w-full [&>svg]:h-full"
                dangerouslySetInnerHTML={{ __html: activeSidebarItem.content }} 
              />
           </Card>
        ) : null}
      </DragOverlay> 
    </DndContext>
  );
}